# =============================================================================
# COCKPIT MAIN CONFIGURATION
# =============================================================================
# Generated by Ansible - kvmhost_cockpit role
# Modification timestamp: {{ ansible_date_time.iso8601 }}

[WebService]
# Listen address (default: all interfaces)
{% if kvmhost_cockpit_listen_address is defined and kvmhost_cockpit_listen_address %}
ListenStream={{ kvmhost_cockpit_listen_address }}:{{ kvmhost_cockpit_port }}
{% else %}
# Using default listen configuration
{% endif %}

# Maximum number of concurrent connections
MaxStartups={{ kvmhost_cockpit_max_startups | default(10) }}

# Idle timeout in seconds
IdleTimeout={{ kvmhost_cockpit_idle_timeout | default(900) }}

# Enable/disable remote access
{% if kvmhost_cockpit_allow_remote | default(true) %}
# Remote access enabled
{% else %}
ListenStream=127.0.0.1:{{ kvmhost_cockpit_port }}
{% endif %}

[Session]
# Session timeout in seconds
IdleTimeout={{ kvmhost_cockpit_session_timeout | default(900) }}

# Banner message
{% if kvmhost_cockpit_banner_message is defined and kvmhost_cockpit_banner_message %}
Banner={{ kvmhost_cockpit_banner_message }}
{% endif %}

[Log]
# Log level: debug, info, warn, error
Fatal={{ kvmhost_cockpit_log_level | default('warn') }}

{% if kvmhost_cockpit_custom_config is defined and kvmhost_cockpit_custom_config %}
# Custom configuration
{% for section, options in kvmhost_cockpit_custom_config.items() %}
[{{ section }}]
{% for key, value in options.items() %}
{{ key }}={{ value }}
{% endfor %}

{% endfor %}
{% endif %}
