name: Test Galaxy API Secret

on:
  workflow_dispatch:

jobs:
  test-secret:
    runs-on: ubuntu-latest
    steps:
      - name: Test Galaxy API Key Secret
        run: |
          echo "Testing GALAXY_API_KEY secret availability..."
          
          if [ -z "$GALAXY_API_KEY" ]; then
            echo "❌ GALAXY_API_KEY secret is empty or not accessible"
            echo "Secret length: ${#GALAXY_API_KEY}"
            echo "Available environment variables containing 'GALAXY':"
            env | grep -i galaxy || echo "No GALAXY environment variables found"
            exit 1
          else
            echo "✅ GALAXY_API_KEY secret is available"
            echo "Secret length: ${#GALAXY_API_KEY} characters"
            echo "First 10 characters: ${GALAXY_API_KEY:0:10}..."
          fi
        env:
          GALAXY_API_KEY: ${{ secrets.GALAXY_API_KEY }}
